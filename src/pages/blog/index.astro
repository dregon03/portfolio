---
import BaseLayout from "../../layouts/BaseLayout.astro";
import BlogPostCard from "../../components/BlogPostCard.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog", ({ data }) => !data.draft)).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout
  title="Blog â€” Tom Hwang"
  description="Thoughts on software development, technology, and building things."
>
  <section class="max-w-3xl mx-auto px-6 py-16">
    <h1
      class="text-3xl sm:text-4xl font-bold text-surface-900 dark:text-surface-100 tracking-tight"
    >
      Blog
    </h1>
    <p class="mt-4 text-surface-500 dark:text-surface-400">
      Writing about software, technology, and the process of building things.
    </p>

    <div class="mt-10 divide-y divide-surface-200 dark:divide-surface-800">
      {posts.map((post) => <BlogPostCard post={post} />)}
    </div>

    {
      posts.length === 0 && (
        <p class="mt-10 text-surface-400 dark:text-surface-500">
          No posts yet. Check back soon.
        </p>
      )
    }
  </section>
</BaseLayout>
