---
import ThemeToggle from "./ThemeToggle.astro";

const currentPath = Astro.url.pathname;

const navLinks = [
  { href: "/", label: "Home" },
  { href: "/about", label: "About" },
  { href: "/projects", label: "Projects" },
  { href: "/blog", label: "Blog" },
];
---

<header
  class="sticky top-0 z-50 border-b border-surface-200 dark:border-surface-800 bg-surface-50/80 dark:bg-surface-950/80 backdrop-blur-md"
>
  <nav class="max-w-5xl mx-auto px-6 h-16 flex items-center justify-between">
    <a
      href="/"
      class="text-lg font-semibold text-surface-900 dark:text-surface-100 hover:text-accent-600 dark:hover:text-accent-400 transition-colors"
    >
      Tom Hwang
    </a>

    <!-- Desktop nav -->
    <div class="hidden md:flex items-center gap-1">
      {
        navLinks.map((link) => (
          <a
            href={link.href}
            class:list={[
              "px-3 py-2 rounded-lg text-sm font-medium transition-colors",
              currentPath === link.href ||
              (link.href !== "/" && currentPath.startsWith(link.href))
                ? "text-accent-600 dark:text-accent-400 bg-accent-500/10"
                : "text-surface-600 dark:text-surface-400 hover:text-surface-900 dark:hover:text-surface-100 hover:bg-surface-100 dark:hover:bg-surface-800",
            ]}
          >
            {link.label}
          </a>
        ))
      }
      <ThemeToggle />
    </div>

    <!-- Mobile menu button -->
    <div class="flex items-center gap-2 md:hidden">
      <ThemeToggle />
      <button
        id="mobile-menu-btn"
        type="button"
        aria-label="Toggle menu"
        class="p-2 rounded-lg text-surface-500 hover:text-surface-800 hover:bg-surface-100 dark:text-surface-400 dark:hover:text-surface-200 dark:hover:bg-surface-800 transition-colors"
      >
        <svg
          class="w-5 h-5"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path>
        </svg>
      </button>
    </div>
  </nav>

  <!-- Mobile menu -->
  <div
    id="mobile-menu"
    class="hidden md:hidden border-t border-surface-200 dark:border-surface-800 bg-surface-50 dark:bg-surface-950"
  >
    <div class="px-6 py-4 flex flex-col gap-1">
      {
        navLinks.map((link) => (
          <a
            href={link.href}
            class:list={[
              "px-3 py-2 rounded-lg text-sm font-medium transition-colors",
              currentPath === link.href ||
              (link.href !== "/" && currentPath.startsWith(link.href))
                ? "text-accent-600 dark:text-accent-400 bg-accent-500/10"
                : "text-surface-600 dark:text-surface-400 hover:text-surface-900 dark:hover:text-surface-100 hover:bg-surface-100 dark:hover:bg-surface-800",
            ]}
          >
            {link.label}
          </a>
        ))
      }
    </div>
  </div>
</header>

<script is:inline>
  document.getElementById("mobile-menu-btn").addEventListener("click", () => {
    document.getElementById("mobile-menu").classList.toggle("hidden");
  });
</script>
