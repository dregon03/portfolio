---
import BaseLayout from "./BaseLayout.astro";

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  updatedDate?: Date;
  tags?: string[];
  image?: string;
}

const { title, description, pubDate, updatedDate, tags = [], image } =
  Astro.props;

const formattedPubDate = pubDate.toLocaleDateString("en-US", {
  year: "numeric",
  month: "long",
  day: "numeric",
});

const formattedUpdatedDate = updatedDate?.toLocaleDateString("en-US", {
  year: "numeric",
  month: "long",
  day: "numeric",
});
---

<BaseLayout title={`${title} â€” Tom Hwang`} description={description} image={image} type="article">
  <article class="max-w-3xl mx-auto px-6 py-16">
    <div class="mb-8">
      <a
        href="/blog"
        class="text-sm text-surface-500 dark:text-surface-400 hover:text-accent-600 dark:hover:text-accent-400 transition-colors"
      >
        &larr; Back to blog
      </a>
    </div>

    <header class="mb-10">
      <h1
        class="text-3xl sm:text-4xl font-bold text-surface-900 dark:text-surface-100 tracking-tight"
      >
        {title}
      </h1>
      <div class="mt-4 flex flex-wrap items-center gap-3 text-sm text-surface-500 dark:text-surface-400">
        <time datetime={pubDate.toISOString()}>{formattedPubDate}</time>
        {
          formattedUpdatedDate && (
            <span>
              (Updated {formattedUpdatedDate})
            </span>
          )
        }
      </div>
      {
        tags.length > 0 && (
          <div class="mt-3 flex flex-wrap gap-2">
            {tags.map((tag) => (
              <span class="text-xs text-surface-500 dark:text-surface-400">
                #{tag}
              </span>
            ))}
          </div>
        )
      }
    </header>

    <div class="prose prose-lg prose-neutral dark:prose-invert max-w-none
      prose-headings:text-surface-900 dark:prose-headings:text-surface-100
      prose-a:text-accent-600 dark:prose-a:text-accent-400
      prose-strong:text-surface-900 dark:prose-strong:text-surface-100
      prose-code:text-surface-800 dark:prose-code:text-surface-200
    ">
      <slot />
    </div>
  </article>
</BaseLayout>
